<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>오늘의 동해삼육 점심</title>
  <style>
    body{
        background-color: rgb(120, 120, 120);
    }
    #meal{
        width: 250px;
        height: auto;
        background-color: rgb(85, 140, 223);
        border-radius: 1rem;
        font-size: 24px;
        border: 5px solid black;
        display: flex; 
        margin: auto;
    }
    #name{ 
        width: 250px;
        height: 40px;
        background-color: rgb(110, 255, 171);
        border-radius: 1rem; 
        font-size: 24px;
        border: 5px solid black;
        display: flex;
        justify-content: center;
        margin: auto;
    }
    #fini{ 
        width: 250px;
        height: 40px;
        background-color: rgb(110, 255, 171);
        border-radius: 1rem; 
        font-size: 24px;
        border: 5px solid black;
        display: flex;
        justify-content: center;
        margin: auto;
    }
    @media ( max-width: 1023px ) {
        #meal{
            width: 510px;
            height: auto;
            background-color: rgb(85, 140, 223);
            border-radius: 1rem;
            font-size: 50px;
            border: 5px solid black;
            display: flex; 
            margin: auto;
        }
        #name{ 
            width: 510px;
            height: 65px;
            background-color: rgb(110, 255, 171);
            border-radius: 1rem; 
            font-size: 50px;
            border: 5px solid black;
            display: flex;
            justify-content: center;
            margin: auto;
        }
        #fini{ 
            width: 510px;
            height: 65px;
            background-color: rgb(110, 255, 171);
            border-radius: 1rem; 
            font-size: 50px;
            border: 5px solid black;
            display: flex;
            justify-content: center;
            margin: auto;
        }
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>
    <div id="name">오늘의 점심밥<br></div>
<script>
    let a = new Date();
    let yy = String(a.getFullYear());
    var mm = a.getMonth() + 1
    var dd = a.getDate()
    if (mm < 10) {
        mm = String("0" + mm)
    } else {
        mm = String(mm)
    };
    if (dd < 10) {
        dd = String("0"+dd)
    } else {
        dd = String(dd)
    };
    let td = yy + mm + dd;
    let urll = "https://open.neis.go.kr/hub/mealServiceDietInfo?Key=bc1eb64ed721437b8dcb818d92d03e42&Type=json&ATPT_OFCDC_SC_CODE=K10&SD_SCHUL_CODE=7800112&MMEAL_SC_CODE=2&MLSV_YMD=" + td;
    function getmeal(urll){
        $.ajax({
            url : urll,
            dataType: 'json',
            async : false,
            success: function(data){
                try{
                    //console.log(data['mealServiceDietInfo'][1]['row'][0]['DDISH_NM'])
                    meal = data['mealServiceDietInfo'][1]['row'][0]['DDISH_NM'];
                    debug_data = data;
                } catch{
                    meal = "급식이 없습니다.";
                } 
                //console.log(data['mealServiceDietInfo'][1]['row'][0]['DDISH_NM']) 
                //console.log(meal)
                return meal;     
            }
        })
    } 

    let pppp = getmeal(urll);
    document.write("<div id = \"meal\" text-align = \"center\">"+meal+"</div>")
    let today = a.getDay();
    switch(today){
        case 1:
            var yo = '월';
            break;
        case 2:
            var yo = '화';
            break;
        case 3:
            var yo = '수';
            break;
        case 4:
            var yo = '목';
            break;
        case 5:
            var yo = '금';
            break;
        default:
            var yo = 'non'; 
    }
    if(today >= 5){
    //console.log("오늘은 "+yo+"요일 입니다.");
    document.write("<div id = \"fini\"> 오늘은 "+yo+"요일 입니다.</div>")
    }
    console.log("개발에 관심 있으십니까? wldlem@icloud.com 으로 이메일 보내보세요.")
    console.log("아마 안 볼 겁니다.")
</script>
</body>
</html>
